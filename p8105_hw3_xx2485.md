p8105_hw3_xx2485
================
Xiaoni Xu
2024-10-14

Loading needed packages:

``` r
library(p8105.datasets)
library(tidyverse)
library(dplyr)
```

## Problem 1

Loading the NY NOAA data

``` r
data("ny_noaa") 

noaa_data <- ny_noaa
```

Get the structure and size of the dataset

``` r
noaa_size <- dim(noaa_data)
noaa_structure <- str(noaa_data)
```

    ## tibble [2,595,176 × 7] (S3: tbl_df/tbl/data.frame)
    ##  $ id  : chr [1:2595176] "US1NYAB0001" "US1NYAB0001" "US1NYAB0001" "US1NYAB0001" ...
    ##  $ date: Date[1:2595176], format: "2007-11-01" "2007-11-02" ...
    ##  $ prcp: int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ snow: int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ snwd: int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ tmax: chr [1:2595176] NA NA NA NA ...
    ##  $ tmin: chr [1:2595176] NA NA NA NA ...
    ##  - attr(*, "spec")=
    ##   .. cols(
    ##   ..   id = col_character(),
    ##   ..   date = col_date(format = ""),
    ##   ..   prcp = col_integer(),
    ##   ..   snow = col_integer(),
    ##   ..   snwd = col_integer(),
    ##   ..   tmax = col_character(),
    ##   ..   tmin = col_character()
    ##   .. )

Summarize key variables

``` r
key_variables_summary <- noaa_data %>%
  summarise(
    num_unique_ids = n_distinct(id),
    date_range = range(date, na.rm = TRUE),
    total_rows = n(),
    prcp_missing = sum(is.na(prcp)),
    snow_missing = sum(is.na(snow)),
    snwd_missing = sum(is.na(snwd)),
    tmax_missing = sum(is.na(tmax)),
    tmin_missing = sum(is.na(tmin))
  )
```

    ## Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
    ## dplyr 1.1.0.
    ## ℹ Please use `reframe()` instead.
    ## ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
    ##   always returns an ungrouped data frame and adjust accordingly.
    ## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
    ## generated.

The dataset `noaa_data` consists of 2595176 rows and 7 columns. It is
structured as a tibble.

The columns are as follows:

- id: A character vector representing the unique identifier for weather
  stations (e.g., “US1NYAB0001”).

- date: A date column indicating the specific date for each observatio,
  , spanning from 1981-01-01 to 2010-12-31.\`

- prcp: An integer column representing the amount of precipitation
  recorded, with 145838 missing values.

- snow: An integer column indicating the amount of snow recorded, with
  381221 missing values.

- snwd: An integer column for snow depth, which has 591786 missing
  values.

- tmax: A character column for the maximum temperature, with 1134358
  missing values.

- tmin: A character column for the minimum temperature, which also has
  1134420 missing values.

The goal is to do some exploration of this dataset. To that end, write a
short description of the dataset, noting the size and structure of the
data, describing some key variables, and indicating the extent to which
missing data is an issue. Then, do or answer the following (commenting
on the results of each):

Do some data cleaning. Create separate variables for year, month, and
day. Ensure observations for temperature, precipitation, and snowfall
are given in reasonable units. For snowfall, what are the most commonly
observed values? Why? Make a two-panel plot showing the average max
temperature in January and in July in each station across years. Is
there any observable / interpretable structure? Any outliers? Make a
two-panel plot showing (i) tmax vs tmin for the full dataset (note that
a scatterplot may not be the best option); and (ii) make a plot showing
the distribution of snowfall values greater than 0 and less than 100
separately by year
